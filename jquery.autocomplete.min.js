(function(e){e.fn.autocomplete=function(t){var n=e.extend({containerclass:"jquery-autocomplete-container",searchclass:"jquery-autocomplete-search",resultsclass:"jquery-autocomplete-results",selectedclass:"jquery-autocomplete-selected"},t);var r=n.containerclass;var i=n.searchclass;var s=n.resultsclass;var o=n.selectedclass;var u=function(t){var n=e(t).attr("for");e(t).next().empty();var r=e(t).val().toLowerCase();if(r.length>0){var i=[];var o=0;e("#"+n).children().each(function(){if(e(this).text().toLowerCase().match(r)){i[o]={val:e(this).val(),text:e(this).text()};o++}});if(i.length>0){for(var u in i){var f=e("<li/>",{value:i[u].val});f.click(a);e("<span/>",{text:i[u].text}).appendTo(f);f.appendTo(e("."+s+'[for="'+n+'"]'))}e("."+s+'[for="'+n+'"]').show()}else{e("."+s+'[for="'+n+'"]').hide()}if(e("."+s+'[for="'+n+'"]').children()===0){e("."+s+'[for="'+n+'"]').hide()}}else{e("."+s+'[for="'+n+'"]').hide()}};var a=function(){var t=e(this).attr("for");if(e(this).hasClass(o)){e(this).parent().prev().val(e(this).text());e(this).parent().prev().attr("value",e(this).attr("value"));e(this).parent().hide()}else{e(this).parent().children().removeClass(o);e(this).addClass(o)}};var f=function(t,n,r){var i=false;var s=e(t).offset();var o=e(t).width();var u=e(t).height();if(n>=s.left&n<=s.left+o&r>=s.top&r<=s.top+u){i=true}return i};this.each(function(){e(this).hide();var t=e("."+r).length;var n=e("<div/>",{"class":r,width:e(this).attr("width"),margin:e(this).attr("margin")});if(e(this).attr("id")===undefined){e(this).attr("id","jquery-autocomplete"+t)}var a=e(this).attr("id");var l=e("<input/>",{"class":i,"for":a});l.css("padding",n.css("padding"));l.keydown(function(t){var n=e(this).attr("for");if(t.keyCode===38||t.keyCode===40){if(e("."+s+'[for="'+n+'"] .'+o).length===1){var r=e("."+s+'[for="'+n+'"]').children("."+o);r.removeClass(o);var i;if(t.keyCode===38){if(r.prev().length>0){i=r.prev()}else{i=r}}if(t.keyCode===40){if(r.next().length>0){i=r.next()}else{i=r}}i.addClass(o);var u=e("."+s+'[for="'+n+'"]');var a=parseInt(i.css("height"),10);var f=u.scrollTop();var l=i.offset().top-e("."+s+'[for="'+n+'"]').children(":first").offset().top;if(l+a>f+parseInt(u.css("height"),10)){u.scrollTop(l+a-parseInt(u.css("height"),10))}if(l<f){u.scrollTop(l)}}else{e("."+s+'[for="'+n+'"]').children(":first").addClass(o)}}else if(t.keyCode===13){if(e("."+s+'[for="'+n+'"] .'+o).length===1){e(this).val(e("."+s+'[for="'+n+'"] .'+o).text());e("."+s+'[for="'+n+'"]').hide()}}});l.keyup(function(e){if(e.keyCode!==13&&e.keyCode!==38&&e.keyCode!==40){u(this)}});l.focus(function(){u(this)});l.appendTo(n);e(this).after(n);var c=e("<ul/>",{"class":s,"for":a});c.css("width",l.css("width"));c.css("padding-left",0);c.css("margin-left",l.css("margin-left"));c.css("margin-right",l.css("margin-right"));c.css("margin-top",parseInt(l.css("margin-bottom"),10)*-1);c.css("position","absolute");c.children().on("load",function(){e(this).css("color","red")});c.children().on("click",function(){e(this).parent().children().removeClass(o);e(this).addClass(o)});c.appendTo(n);e(document).click(function(t){var n=t.clientX;var r=t.clientY;e("."+s+":visible").each(function(){var t=false;if(f(e(this),n,r)){t=true}if(f(e(this).parent(),n,r)){t=true}if(f(e(this).prev(),n,r)){t=true}if(!t){e(this).hide()}});e("."+i).each(function(){var t=e(this).offset();var i=e(this).width();var s=e(this).height();if(n>=t.left&n<=t.left+i&r>=t.top&r<=t.top+s){keepOpen=true}var o=e(this)});e("."+o).each(function(){var t=e(this).offset();var i=e(this).width();var s=e(this).height();if(n>=t.left&n<=t.left+i&r>=t.top&r<=t.top+s){keepOpen=true}var o=e(this)})})})}})(jQuery)